(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(22),o=n.n(r),s=n(12),i=n(7),u=n(2),l=n(3),h=n(6),j=n(5),b=n(0),p=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={search:""},e.onSubmit=function(t){t.preventDefault(),""!==e.state.search.trim()?(e.props.onSubmit(e.state.search),e.setState({search:""})):alert("Add your search query")},e.onChange=function(t){e.setState({search:t.target.value})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmit,children:[Object(b.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(b.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(b.jsx)("input",{onChange:this.onChange,name:"searh",value:this.state.search,className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})}}]),n}(a.Component),O=n(23),d=n.n(O),m=function(){function e(){Object(u.a)(this,e),this._searchQuery="",this.page=1}return Object(l.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"searchPage",get:function(){return this.page},set:function(e){return this.page=e}},{key:"resetPage",value:function(){return this.page=1}},{key:"searchPhotos",value:function(){var e="https://pixabay.com/api/"+"?q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&image_type=photo&orientation=horizontal&key=").concat("23081749-b9f3d38fc4718cbd45a8beed9");return d.a.get(e).then((function(e){return e})).catch((function(e){console.log(e)}))}}]),e}(),f=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={modalIsOpen:!1},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.images.map((function(e){var t=e.webformatURL,n=e.id,a=e.tags;return Object(b.jsx)("li",{className:"ImageGalleryItem",children:Object(b.jsx)("img",{id:n,src:t,alt:a,className:"ImageGalleryItem-image"})},n)}))}}]),n}(a.Component),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{onClick:this.props.onModalOpen,className:"ImageGallery",children:Object(b.jsx)(f,{images:this.props.images})})})}}]),n}(a.Component),y=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleClick=function(){return e.props.onClick(1)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)("button",{onClick:this.handleClick,className:"Button",type:"button",children:"Load More!"})}}]),n}(a.Component),v=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){27===t.keyCode&&e.props.onModalCloseByEsc()}))}},{key:"render",value:function(){return Object(b.jsx)("div",{onClick:this.props.onModalClose,onKeyDown:this.props.onKeyDown,className:"Overlay",children:Object(b.jsx)("div",{className:"Modal",children:Object(b.jsx)("img",{className:"LargeGalleryImage",src:this.props.largeImg,alt:""})})})}}]),n}(a.Component),x=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"lds-ellipsis",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}}]),n}(a.Component),k=(n(47),new m);function C(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(1),o=Object(i.a)(r,2),u=o[0],l=o[1],h=Object(a.useState)([]),j=Object(i.a)(h,2),O=j[0],d=j[1],m=Object(a.useState)("init"),f=Object(i.a)(m,2),C=f[0],S=f[1],w=Object(a.useState)(!1),N=Object(i.a)(w,2),I=N[0],M=N[1],E=Object(a.useState)(""),P=Object(i.a)(E,2),F=P[0],Q=P[1];Object(a.useEffect)((function(){""!==n&&(window.scrollTo({top:document.documentElement,behavior:"smooth"}),k.resetPage(),S("pending"),l(1),k.searchQuery=n,k.searchPhotos().then((function(e){0!==e.data.hits.length?d(Object(s.a)(e.data.hits)):alert("Nothing to show! Change your search query")})).then(l((function(e){return e+1}))).finally((function(){S("success")})))}),[n]);var L=function(e){var t=O.find((function(t){return t.id.toString()===e.target.id}));M(!I),Q(t.largeImageURL)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{onSubmit:function(e){c(e)}}),Object(b.jsx)(g,{images:O,onModalOpen:L}),"pending"===C&&Object(b.jsx)(x,{}),O.length>0&&Object(b.jsx)(y,{onClick:function(e){S("pending"),l(u+1),k.searchPage=u,k.searchPhotos().then((function(e){d((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.data.hits))}))})).catch((function(e){console.log(e)})).finally((function(){S("success"),window.scrollTo({top:document.documentElement.scrollHeight-1200,behavior:"smooth"})}))}}),I&&Object(b.jsx)(v,{onModalOpen:L,onModalClose:function(e){"Overlay"===e.target.className&&"Overlay"===e.currentTarget.className&&M(!I)},onModalCloseByEsc:function(){M(!1)},largeImg:F})]})}o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.16940457.chunk.js.map